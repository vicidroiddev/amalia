


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="State-machine-driven MVP library with unidirectional data flow via states and events">
      
      
        <link rel="canonical" href="https://vicidroiddev.github.io/amalia/modules/recyclerview/">
      
      
        <meta name="author" content="Vicidroiddev">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.2.0">
    
    
      
        <title>RecyclerView Delegate - Amalia Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.18ac144a.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.616af814.min.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,400i,700%7CFira+Mono&display=fallback">
        <style>body,input{font-family:"Fira Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#recyclerview-backed-delegates" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://vicidroiddev.github.io/amalia/" title="Amalia Documentation" class="md-header-nav__button md-logo" aria-label="Amalia Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Amalia Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              RecyclerView Delegate
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/vicidroiddev/amalia/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    vicidroiddev/amalia
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://vicidroiddev.github.io/amalia/" title="Amalia Documentation" class="md-nav__button md-logo" aria-label="Amalia Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Amalia Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/vicidroiddev/amalia/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    vicidroiddev/amalia
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../gettingstarted/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Standard Components
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Standard Components" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Standard Components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../components/presenters/" title="Presenters" class="md-nav__link">
      Presenters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../components/recyclerview/" title="RecyclerView Delegate" class="md-nav__link">
      RecyclerView Delegate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../components/viewdelegates/" title="View Delegate" class="md-nav__link">
      View Delegate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../components/viewstates/" title="View State" class="md-nav__link">
      View State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../components/viewevents/" title="View Event" class="md-nav__link">
      View Event
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Modules
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Modules" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/" title="Dependencies" class="md-nav__link">
      Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../coroutinescopes/" title="Coroutine Scopes" class="md-nav__link">
      Coroutine Scopes
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        RecyclerView Delegate
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="RecyclerView Delegate" class="md-nav__link md-nav__link--active">
      RecyclerView Delegate
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adding-gradle-dependency" class="md-nav__link">
    Adding gradle dependency
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    Basic usage
  </a>
  
    <nav class="md-nav" aria-label="Basic usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-your-own-recyclerviewdelegate" class="md-nav__link">
    1. Create your own RecyclerViewDelegate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-create-a-recycler-item-to-bind-data-to-view" class="md-nav__link">
    2. Create a recycler item to bind data to view
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-emit-recycler-items-with-a-presenter" class="md-nav__link">
    3. Emit recycler items with a presenter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-dont-forget-to-bind-the-presenter-and-delegate" class="md-nav__link">
    4. Don't forget to bind the presenter and delegate!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recyclerview-options" class="md-nav__link">
    RecyclerView options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sticky-header-support" class="md-nav__link">
    Sticky header support
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Change Log" class="md-nav__link">
      Change Log
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adding-gradle-dependency" class="md-nav__link">
    Adding gradle dependency
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    Basic usage
  </a>
  
    <nav class="md-nav" aria-label="Basic usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-your-own-recyclerviewdelegate" class="md-nav__link">
    1. Create your own RecyclerViewDelegate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-create-a-recycler-item-to-bind-data-to-view" class="md-nav__link">
    2. Create a recycler item to bind data to view
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-emit-recycler-items-with-a-presenter" class="md-nav__link">
    3. Emit recycler items with a presenter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-dont-forget-to-bind-the-presenter-and-delegate" class="md-nav__link">
    4. Don't forget to bind the presenter and delegate!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recyclerview-options" class="md-nav__link">
    RecyclerView options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sticky-header-support" class="md-nav__link">
    Sticky header support
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/vicidroiddev/amalia/edit/master/docs/modules/recyclerview.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="recyclerview-backed-delegates">RecyclerView Backed Delegates<a class="headerlink" href="#recyclerview-backed-delegates" title="Permanent link">&para;</a></h1>
<p>This module gives plug and play support for simple and complex lists.</p>
<p>You can build complex dashboards where each item in the RecyclerView is backed by a different presenter. If each card needs to own its own logic for when to display - NO problem.</p>
<p>You can also create simple lists that are composed of different view items, such as cards, headers, etc...</p>
<p>Out of the box you will get:</p>
<ul>
<li>Async diff support (send a bunch of items via pushState, only the items that changed will be processed)</li>
<li>A wrapper around RecyclerView that allows you to focus on your own display logic</li>
<li>Optional tracking of items seen via event propagation to your presenter</li>
</ul>
<h2 id="adding-gradle-dependency">Adding gradle dependency<a class="headerlink" href="#adding-gradle-dependency" title="Permanent link">&para;</a></h2>
<p>Add the amalia dependency in your app level build.gradle file.</p>
<p><div class="highlight"><pre><span></span><code><span class="n">implementation</span> <span class="s1">&#39;com.github.vicidroiddev.amalia:amalia-recyclerview:{latest_version}@aar&#39;</span>
</code></pre></div>
<a href="https://jitpack.io/#vicidroiddev/amalia"><img alt="Jitpack" src="https://jitpack.io/v/vicidroiddev/amalia.svg" /></a></p>
<h2 id="basic-usage">Basic usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h2>
<h4 id="1-create-your-own-recyclerviewdelegate">1. Create your own RecyclerViewDelegate<a class="headerlink" href="#1-create-your-own-recyclerviewdelegate" title="Permanent link">&para;</a></h4>
<p>This is the view layer. You likely won't have much code to put in here.
You can customize some options such as spacing or layout managers for the recyclerview if needed.
See the constructor for additional options.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyLongListViewDelegate</span><span class="p">(</span><span class="n">lifecycleOwner</span><span class="p">:</span> <span class="n">LifecycleOwner</span><span class="p">,</span> <span class="n">view</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">RecyclerViewDelegate</span><span class="p">&lt;</span><span class="n">DiscoverTvItem</span><span class="p">,</span> <span class="n">DiscoverTvItem</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">&gt;(</span>
        <span class="n">lifecycleOwner</span><span class="p">,</span>
        <span class="n">view</span><span class="p">,</span>
        <span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">the_recyclerview_id</span><span class="p">,</span>
        <span class="n">trackItemsSeen</span> <span class="p">=</span> <span class="k">true</span> <span class="cm">/* optional */</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="2-create-a-recycler-item-to-bind-data-to-view">2. Create a recycler item to bind data to view<a class="headerlink" href="#2-create-a-recycler-item-to-bind-data-to-view" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyRecyclerViewItem</span><span class="p">(</span><span class="k">val</span> <span class="py">myItem</span><span class="p">:</span> <span class="n">MyItem</span><span class="p">)</span> <span class="p">:</span> <span class="n">BaseRecyclerItem</span><span class="p">&lt;</span><span class="n">DiscoverTvItem</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">&gt;(</span><span class="n">discoverResult</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Pass a layout represented by the given item to display - CardView for example</span>
    <span class="k">override</span> <span class="k">val</span> <span class="py">layoutRes</span> <span class="p">=</span> <span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">my_list_item_layout</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">createViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">=</span> <span class="n">MyViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">)</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">bind</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">:</span> <span class="n">ViewHolder</span><span class="p">,</span> <span class="n">payloads</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">ChangePayload</span><span class="p">&lt;</span><span class="n">DiffItem</span><span class="p">&gt;&gt;)</span> <span class="p">{</span>
        <span class="n">with</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// bind myItem to the view here</span>
            <span class="n">name</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">myItem</span><span class="p">.</span><span class="n">name</span>

        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">class</span> <span class="nc">MyViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">:</span> <span class="n">BaseRecyclerViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">TextView</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">my_name</span><span class="p">)</span>

        <span class="n">init</span> <span class="p">{</span>
            <span class="c1">// Set onclick listeners here or any other view listeners</span>

            <span class="c1">// Push events here to be processed by your presenter</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="3-emit-recycler-items-with-a-presenter">3. Emit recycler items with a presenter<a class="headerlink" href="#3-emit-recycler-items-with-a-presenter" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyLongListPresenter</span><span class="p">(</span><span class="k">private</span> <span class="k">val</span> <span class="py">repository</span><span class="p">:</span> <span class="n">MyRepository</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">BasePresenter</span><span class="p">(),</span>
    <span class="n">Refreshable</span> <span class="p">{</span>

    <span class="k">private</span> <span class="k">var</span> <span class="py">results</span><span class="p">:</span> <span class="n">MutableList</span><span class="p">&lt;</span><span class="n">DiscoverResult</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">()</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">loadInitialState</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">mainScope</span><span class="p">.</span><span class="n">launch</span> <span class="p">{</span>
            <span class="c1">// Make a suspending call that could be expensive, get a long list of items from a db for example.</span>
            <span class="k">val</span> <span class="py">items</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">fetchItems</span><span class="p">()</span>

            <span class="c1">// Convert that data item (regular POJO class) to a RecyclerItem</span>
            <span class="k">val</span> <span class="py">viewItems</span> <span class="p">=</span> <span class="n">items</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">myItem</span> <span class="p">-&gt;</span> <span class="n">MyRecyclerViewItem</span><span class="p">(</span><span class="n">myItem</span><span class="p">)</span> <span class="p">}</span>

            <span class="n">pushState</span><span class="p">(</span><span class="n">RecyclerViewState</span><span class="p">.</span><span class="n">ListLoaded</span><span class="p">(</span><span class="n">viewItems</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="4-dont-forget-to-bind-the-presenter-and-delegate">4. Don't forget to bind the presenter and delegate!<a class="headerlink" href="#4-dont-forget-to-bind-the-presenter-and-delegate" title="Permanent link">&para;</a></h4>
<p>See getting started section for how to perform binding.</p>
<h2 id="recyclerview-options">RecyclerView options<a class="headerlink" href="#recyclerview-options" title="Permanent link">&para;</a></h2>
<p>Create a subclass of <code>RecyclerViewDelegate</code> and pass your desired params.
Most arguments are optional. The bare minimum is <code>viewLifecycleOwner</code>, <code>rootView</code>, and <code>recyclerViewId</code>.
These arguments are subject to change.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyListViewDelegate</span><span class="p">(</span><span class="n">lifecycleOwner</span><span class="p">:</span> <span class="n">LifecycleOwner</span><span class="p">,</span> <span class="n">view</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">:</span> <span class="n">RecyclerViewDelegate</span><span class="p">(</span>
        <span class="c1">// Provide a lifecycle owner to ensure events can be sent to your presenter</span>
        <span class="n">viewLifeCycleOwner</span> <span class="p">=</span> <span class="n">lifecycleOwner</span><span class="p">,</span>

        <span class="c1">// Provide the parent view</span>
        <span class="n">rootView</span> <span class="p">=</span> <span class="n">view</span><span class="p">,</span>

        <span class="c1">// Provide the id of the recyclerview in your layout</span>
        <span class="n">recyclerViewId</span> <span class="p">=</span> <span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">main_discover_page_list_root</span><span class="p">,</span>

        <span class="c1">// Optional: Pass a layout manager, by default a vertical linear layout manager is used</span>
        <span class="n">layoutManager</span> <span class="p">=</span> <span class="n">LinearLayoutManager</span><span class="p">(</span><span class="n">rootView</span><span class="p">.</span><span class="n">context</span><span class="p">),</span>

        <span class="c1">// Optional: Pass the spacing to be used between items in dp</span>
        <span class="n">spaceSeparationInDp</span> <span class="p">=</span> <span class="m">8</span><span class="p">,</span>

        <span class="c1">// Optional: Pass the divider decoration to use. A space offset decorator is provided by default</span>
        <span class="n">defaultDividerDecoration</span> <span class="p">=</span>  <span class="n">SpaceItemOffsetDecoration</span><span class="p">(</span><span class="n">rootView</span><span class="p">.</span><span class="n">context</span><span class="p">,</span> <span class="n">spaceSeparationInDp</span><span class="p">),</span>

        <span class="c1">// Optional: Provide a DiffItem callback, by default one is provided for items that implement `DiffItem`</span>
        <span class="n">asyncDiffCallback</span> <span class="p">=</span> <span class="n">AsyncRecyclerItemDiffCallback</span><span class="p">(),</span>

        <span class="c1">// Optional: Provide a different setting in case your recyclerview is not a fixed size</span>
        <span class="n">recyclerViewHasFixedSize</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>

        <span class="c1">// Optional: Pass true to get ViewEvents notifying you of Items that were seen.</span>
        <span class="n">trackItemsSeen</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>

        <span class="c1">// Optional: Pass the percent threshold 1-100 for when an item is considered visible.</span>
        <span class="n">visibilityThresholdPercentage</span> <span class="p">=</span> <span class="m">80</span><span class="p">,</span>

        <span class="c1">// Optional: Pass true if you wish to use sticky headers.</span>
        <span class="n">useStickyHeaders</span> <span class="p">=</span> <span class="k">false</span>
    <span class="p">)</span>
</code></pre></div>

<h2 id="sticky-header-support">Sticky header support<a class="headerlink" href="#sticky-header-support" title="Permanent link">&para;</a></h2>
<p>A basic example for supporting headers involves passing <code>useStickyHeaders = true</code> to your view delegate.</p>
<div class="highlight"><pre><span></span><code><span class="n">MyListDelegate</span><span class="p">(</span><span class="n">lifecycleOwner</span><span class="p">:</span> <span class="n">LifecycleOwner</span><span class="p">,</span> <span class="n">view</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">:</span> <span class="n">RecyclerViewDelegate</span><span class="p">(</span>
            <span class="p">...,</span> <span class="c1">// required params</span>
            <span class="n">useStickyHeaders</span> <span class="p">=</span> <span class="k">true</span> <span class="c1">// required for sticky support</span>
</code></pre></div>

<p>In addition, we need to define the header layout and what section each item belongs to.
Similiar to how your RecyclerItem provides the necessary view for each item, it can also provide details
for the header section it belongs to.</p>
<p>You will need to provide the header layout and an identifier which tells the system
when a new header should be drawn for the next view item. View items using the same header id will have the same sticky header while scrolling.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DiscoverTvItem</span><span class="p">(</span><span class="k">val</span> <span class="py">discoverResult</span><span class="p">:</span> <span class="n">DiscoverResult</span><span class="p">)</span>
    <span class="p">:</span> <span class="n">BaseRecyclerItem</span><span class="p">&lt;</span><span class="n">DiscoverTvItem</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">&gt;(</span><span class="n">discoverResult</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Provide the layout that represents the sticky header</span>
    <span class="k">override</span> <span class="k">val</span> <span class="py">headerLayoutRes</span> <span class="p">=</span> <span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">list_item_discover_tv_header_not_rounded</span>

    <span class="c1">// Provide a positive long to denote the header id this item belongs to.</span>
    <span class="c1">// For example if you have a contact list, return a representation of each letter as your id.</span>
    <span class="k">override</span> <span class="k">val</span> <span class="py">headerId</span><span class="p">:</span> <span class="n">Long</span> <span class="p">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">discoverResult</span><span class="p">.</span><span class="n">firstAirDate</span><span class="p">.</span><span class="n">hashCode</span><span class="p">().</span><span class="n">toLong</span><span class="p">())</span>

    <span class="c1">// Return an instance of your own viewholder class which can hold on to your header view</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">createHeaderViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">=</span> <span class="n">MyHeaderViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">)</span>

    <span class="c1">// Ensure that you keep your header up to date</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">bindHeader</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">:</span> <span class="n">BaseHeaderViewHolder</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="n">viewHolder</span> <span class="k">as</span> <span class="n">MyHeaderViewHolder</span><span class="p">).</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">discoverResult</span><span class="p">.</span><span class="n">firstAirDate</span>
    <span class="p">}</span>

    <span class="c1">// Cache your child views. In our case we want to set the title for our header.</span>
    <span class="k">class</span> <span class="nc">MyHeaderViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">:</span> <span class="n">BaseHeaderViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">title</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">&lt;</span><span class="n">TextView</span><span class="p">&gt;(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">list_item_discover_tv_header_title</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../coroutinescopes/" title="Coroutine Scopes" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Coroutine Scopes
              </div>
            </div>
          </a>
        
        
          <a href="../../changelog/" title="Change Log" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Change Log
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Raphael K
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.5f27aba8.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>